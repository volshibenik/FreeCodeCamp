<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Simon Game</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="cube cube-0"></div>
	<div class="cube cube-1"></div>
	<div class="cube cube-2"></div>
	<div class="cube cube-3"></div>
	<script>
		const cubes = document.querySelectorAll('.cube');
		var sequence = [1,2,0,3,1,1];
	
		function simon_sequence(array) {
			for(var i = 0; i < array.length; i++) {
				
				
				
			}
		}
		
		function removeTransition() {
    	this.classList.remove('playing'); 
    }
		
		cubes.forEach(function(cube){
			return cube.addEventListener('transitionend', removeTransition);
		});
		
		cubes.forEach(function(cube){
			return cube.addEventListener('click', playerClicks)
		});
		
		
		var clickN = 0;  //not here
		var targetNode;
		
		function playerClicks(){
			
			targetNode = /[0-9]/.exec(this.className);
			
			if (targetNode != sequence[clickN]) {
				console.log('error');
			} else {console.log('gut!');}
			clickN+=1;
			if (clickN > sequence.length) {
				// push another and relaunch runIter
			}
		}
		
		function randomCube(){
			return math.floor(Math.random()*4);
		}
		
		//https://stackoverflow.com/questions/24293376/javascript-for-loop-with-timeout
		
		function runIteration(fn, numTimes, delay) {
			var cnt = 0;
			function next() {
				fn(cnt)
				cnt++;
				if (cnt < numTimes) {
					setTimeout(next, delay);
				} else console.log('fin!');
			}
			// start first iteration
			setTimeout(next, 1000);
		}
		
		runIteration(function(j) {
			play(sequence[j]);
		}, sequence.length, 1000);
		
		
		function play(num) {
			cubes[num].classList.add('playing');
		}
		
		window.addEventListener('keydown', function(e){
			console.log(e.keyCode);
		})
		
		//two functions below work too
		
		///// 1
/*		function doScaledTimeout(i) {
			setTimeout(function() {
				play(sequence[i]);
				console.log(i);
			}, i * 2000);
		}
		
		for (var i = 0; i <= 3; ++i)
			doScaledTimeout(i);
			*/
		
		
		///// 2
		
		
		
	/*	(function fn(n) {
			console.log(n);
			if (n < arr.length) setTimeout(function() {
				play(sequence[n]);
				fn(++n);
			}, 1000);
		}(0));
		*/
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</script>
</body>
</html>